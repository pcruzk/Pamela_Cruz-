<!DOCTYPE html>
<html>
<head><meta charset="utf-8"><title>Ej 20</title></head>
<body>
<h3>Ej 20 - procesarLista (async/await)</h3>
<pre id="out"></pre>
<script>
const out = s => document.getElementById('out').textContent += s + '\n';

function procesarNumeroPromesa(num) {
  const delay = Math.random() * (1500 - 500) + 500;
  return new Promise(resolve => setTimeout(() => {
    out(`Procesando ${num}...`);
    resolve();
  }, delay));
}

async function procesarListaAsync(arr) {
  await Promise.all(arr.map(n => procesarNumeroPromesa(n)));
  return 'Proceso completado';
}

(async () => {
  const msg = await procesarListaAsync([1,2,3,4]);
  out(msg);
})();
</script>
</body>
</html>